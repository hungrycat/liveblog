<script>
function expandTextarea(id) {
    var $element = $('.expanderText').get(0);  
    
    $element.addEventListener('keyup', function() {
        this.style.overflow = 'hidden';
        this.style.height = 0;
        this.style.height = this.scrollHeight + 'px';
    }, false);
}

expandTextarea('txtarea');


</script>

<script src="/js/angular-file-upload-html5-shim.min.js"></script> 
<script src="/js/angular-file-upload.min.js"></script>


<!-- Navbar -->
<div ng-controller="EventController">
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation" >
	  <div class="container">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">LiveBlogger</a>
	    </div>
	    <h4 class="navbar-text">{{ eventName }}</h4>

	    <ul class="nav navbar-nav navbar-right"> 
	   		<li>
	   			<button class="btn btn-default navbar-btn " data-toggle="modal" data-target="#embed-code">Get embed code</button>

	   		</li>
			<li> 
				<button type="button" class="btn btn-default navbar-btn " ng-click="eventLiveStatus()">Event {{ eventIsLiveBool ? "Live" : "Ended"  }}</button>
			</li>
		</ul>

	  </div><!-- /.container-fluid -->
	</nav>
</div>

<!-- embed code modal -->

<div class="modal fade" id="embed-code" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Embed Code:</h4>
      </div>
      <div class="modal-body">
        	<pre>&lt;iframe id="liveblog-event" width="550" height="900" frameborder="0" src="www.example.com/view/:event_id"&gt;&lt;/iframe&gt;</pre>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 


<!-- live event body -->

<div class="container-fluid" ng-controller="EventController">


	<!-- new post -->
	<div id="posts-form" class="row-fluid">
		<div class="col-md-12">
			<form class="form-inline" role="form">
				<textarea id="txtarea" class="col-md-6 expanderText" ng-model="formData.postText" >default</textarea>
				<div class="col-md-2">
					<button type="submit" class="btn btn-primary" ng-click="createPost()">Post</button>

				</div>
				<div class="col-md-3" ng-controller="ImageUploadController">
				<!-- <div ng-controller="MyCtrl"> -->
					<input type="file" name="image" onchange="angular.element(this).scope().uploadFile(this.files)"/>
				</div>
			</form>
		</div>
	</div>

	<!-- Posts and comments section -->
	<div class="row-fluid">

		<!-- posts -->
		<div class="col-md-7 posts-container">

			<!-- loop over the posts -->
			<div ng-repeat="post in posts | orderBy:'postCreatedAt': true">
				<!-- <individual post> -->

				<div ng-controller="PostController" class="row-fluid">
					<div class="col-md-10 post">
						<div >
						  <a href="#" ng-click="editing = true" editable-textarea="post.postText" e-rows="7" e-cols="60" onbeforesave="updatePost($data, post._id)">
						    <pre class="edit-textarea">{{ post.postText }}</pre>
						  </a>
						</div>
						<!--Save for use in Event Viewer <p class="post-content" ng-bind-html="post.postText | breakFilter">{{ post.postText }}</p> -->
						<p class="post-meta">by <strong>Author</strong> {{ postTimeString }} ago</p>
					</div>
					<div class="col-md-2 post-side" >
						<button type="button" ng-hide="editing" class="btn btn-xs btn-warning" ng-click="deletePost(post._id)">Delete</button>
					</div>
				</div> 




				<!-- </individual post> -->
			</div>
		</div>  <!-- /posts -->

		<!-- comments  -->
		<div class="col-md-4 col-md-offset-1">
			<h2>Comments</h2>

			<!-- loop over the comments -->
			<div  ng-repeat="post in posts">
				<div class="col-md-9">
					<blockquote>
						<p>{{ post.postText }}</p>
					</blockquote>
				</div>
				<div class="col-md-3 comment-buttons-space">
					<button type="button" class="btn btn-xs btn-info side-btn-sm">Edit</button>
					<button type="button" class="btn btn-xs btn-primary side-btn-sm">Post</button>
				</dvi>
			</div>
		</div>  <!-- /comments -->

	</div> <!-- /Posts and comments section -->




</div><!-- /live event body -->